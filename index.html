<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emergency Services Portal</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { Search, Phone, MapPin, Calendar, Building, Truck, Plane, AlertTriangle, Edit2, Save, X, Users, Plus, Trash2, Lock } = lucide;

        const EmergencyPortal = () => {
            const [searchTerm, setSearchTerm] = useState('');
            const [selectedEntity, setSelectedEntity] = useState(null);
            const [showAdmin, setShowAdmin] = useState(false);
            const [isAuthenticated, setIsAuthenticated] = useState(false);
            const [passwordInput, setPasswordInput] = useState('');
            const [showPasswordModal, setShowPasswordModal] = useState(false);
            const [adminAction, setAdminAction] = useState('');
            const [newEntity, setNewEntity] = useState({
                name: '',
                type: 'facility',
                address: '',
                phoneNumbers: [{ department: 'Main', number: '', type: 'primary' }],
                contractedService: '',
                erEntrance: '',
                flightProgram: {
                    isOneCall: false,
                    participating: false,
                    notes: ''
                },
                backupServices: {
                    airService: '',
                    groundService: '',
                    noUnitsContact: '',
                    mutualAid: ''
                },
                countyInfo: {
                    coverage: '',
                    population: '',
                    squareMiles: ''
                },
                notes: ''
            });

            // Load data from localStorage or use defaults
            const [entities, setEntities] = useState(() => {
                const saved = localStorage.getItem('emergencyEntities');
                if (saved) {
                    return JSON.parse(saved);
                }
                return [
                    {
                        id: 1,
                        name: "Metro General Hospital",
                        type: "facility",
                        address: "123 Medical Center Dr, Metro City, ST 12345",
                        phoneNumbers: [
                            { department: "Main", number: "(555) 123-4567", type: "primary" },
                            { department: "Emergency", number: "(555) 123-4911", type: "emergency" },
                            { department: "Admissions", number: "(555) 123-4500", type: "department" },
                            { department: "ICU", number: "(555) 123-4600", type: "department" }
                        ],
                        contractedService: "Emergency Transport & Flight Service",
                        erEntrance: "North side of building, Level 1. Marked helicopter landing pad 200ft from ER entrance.",
                        flightProgram: {
                            isOneCall: true,
                            participating: true,
                            notes: "24/7 flight service. Preferred landing zone: Helipad H1"
                        },
                        backupServices: {
                            airService: "Regional Air Rescue (555) 999-0001 - 15 miles north",
                            groundService: "Metro EMS Backup (555) 888-0002 - 8 miles east"
                        },
                        lastContact: "2024-08-28",
                        notes: "Level 1 Trauma Center. Always staffed with flight crew on standby."
                    },
                    {
                        id: 2,
                        name: "County 911 Dispatch",
                        type: "911center",
                        address: "456 Emergency Services Blvd, County Seat, ST 54321",
                        phoneNumbers: [
                            { department: "Main Dispatch", number: "(555) 911-0001", type: "primary" },
                            { department: "Fire Dispatch", number: "(555) 911-0002", type: "department" },
                            { department: "Medical Dispatch", number: "(555) 911-0003", type: "department" },
                            { department: "Administrative", number: "(555) 911-0100", type: "admin" }
                        ],
                        contractedService: "Primary 911 Response Coordination",
                        erEntrance: "N/A - Dispatch Center",
                        flightProgram: {
                            isOneCall: true,
                            participating: true,
                            notes: "Coordinates all county flight requests"
                        },
                        backupServices: {
                            noUnitsContact: "State Emergency Services (555) 777-0001",
                            mutualAid: "Adjacent County Dispatch (555) 666-0001"
                        },
                        countyInfo: {
                            coverage: "Full county coverage",
                            population: "125,000",
                            squareMiles: "450"
                        },
                        lastContact: "2024-09-01",
                        notes: "Primary dispatch for all county emergency services. 24/7 operation."
                    }
                ];
            });

            // Save to localStorage whenever entities change
            useEffect(() => {
                localStorage.setItem('emergencyEntities', JSON.stringify(entities));
            }, [entities]);

            const filteredEntities = entities.filter(entity =>
                entity.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                entity.address.toLowerCase().includes(searchTerm.toLowerCase()) ||
                entity.phoneNumbers.some(phone => phone.number.includes(searchTerm)) ||
                entity.type.toLowerCase().includes(searchTerm.toLowerCase())
            );

            const handlePasswordSubmit = () => {
                if (passwordInput === '0911') {
                    setIsAuthenticated(true);
                    setShowPasswordModal(false);
                    setPasswordInput('');
                    if (adminAction === 'add') {
                        setShowAdmin(true);
                    }
                } else {
                    alert('Incorrect password');
                    setPasswordInput('');
                }
            };

            const handleAdminClick = (action) => {
                setAdminAction(action);
                if (!isAuthenticated) {
                    setShowPasswordModal(true);
                } else {
                    if (action === 'add') {
                        setShowAdmin(true);
                    }
                }
            };

            const handleAddPhone = (entityData, setEntityData) => {
                const newPhone = { department: '', number: '', type: 'department' };
                setEntityData(prev => ({
                    ...prev,
                    phoneNumbers: [...prev.phoneNumbers, newPhone]
                }));
            };

            const handleRemovePhone = (index, entityData, setEntityData) => {
                setEntityData(prev => ({
                    ...prev,
                    phoneNumbers: prev.phoneNumbers.filter((_, i) => i !== index)
                }));
            };

            const handlePhoneChange = (index, field, value, entityData, setEntityData) => {
                setEntityData(prev => ({
                    ...prev,
                    phoneNumbers: prev.phoneNumbers.map((phone, i) => 
                        i === index ? { ...phone, [field]: value } : phone
                    )
                }));
            };

            const handleSaveNewEntity = () => {
                const id = entities.length > 0 ? Math.max(...entities.map(e => e.id)) + 1 : 1;
                const today = new Date().toISOString().split('T')[0];
                const entityToSave = {
                    ...newEntity,
                    id,
                    lastContact: today
                };
                
                setEntities([...entities, entityToSave]);
                setShowAdmin(false);
                setNewEntity({
                    name: '',
                    type: 'facility',
                    address: '',
                    phoneNumbers: [{ department: 'Main', number: '', type: 'primary' }],
                    contractedService: '',
                    contractualObligations: [
                        { callType: 'Emergency', responseTime: '', requirements: '' }
                    ],
                    erEntrance: '',
                    flightProgram: {
                        isOneCall: false,
                        participating: false,
                        notes: ''
                    },
                    backupServices: {
                        airService: '',
                        groundService: '',
                        noUnitsContact: '',
                        mutualAid: ''
                    },
                    countyInfo: {
                        coverage: '',
                        population: '',
                        squareMiles: ''
                    },
                    notes: ''
                });
            };

            const handleDeleteEntity = (entityId) => {
                if (confirm('Are you sure you want to delete this entity?')) {
                    setEntities(entities.filter(e => e.id !== entityId));
                    if (selectedEntity?.id === entityId) {
                        setSelectedEntity(null);
                    }
                }
            };

            const exportData = () => {
                const dataStr = JSON.stringify(entities, null, 2);
                const dataBlob = new Blob([dataStr], {type: 'application/json'});
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'emergency-entities-backup.json';
                link.click();
            };

            const importData = (event) => {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        try {
                            const importedData = JSON.parse(e.target.result);
                            setEntities(importedData);
                            alert('Data imported successfully!');
                        } catch (error) {
                            alert('Error importing data. Please check the file format.');
                        }
                    };
                    reader.readAsText(file);
                }
            };

            const getTypeIcon = (type) => {
                return type === 'facility' ? React.createElement(Building, { className: "h-4 w-4" }) : React.createElement(Users, { className: "h-4 w-4" });
            };

            const getTypeColor = (type) => {
                return type === 'facility' 
                    ? 'bg-blue-100 text-blue-800' 
                    : 'bg-red-100 text-red-800';
            };

            const getPhoneTypeColor = (type) => {
                switch (type) {
                    case 'emergency': return 'bg-red-100 text-red-800';
                    case 'primary': return 'bg-blue-100 text-blue-800';
                    case 'department': return 'bg-gray-100 text-gray-800';
                    case 'admin': return 'bg-purple-100 text-purple-800';
                    default: return 'bg-gray-100 text-gray-800';
                }
            };

            // Password Modal
            const PasswordModal = () => (
                React.createElement('div', { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" },
                    React.createElement('div', { className: "bg-white rounded-lg p-6 w-96" },
                        React.createElement('div', { className: "flex items-center mb-4" },
                            React.createElement(Lock, { className: "h-5 w-5 text-gray-400 mr-2" }),
                            React.createElement('h3', { className: "text-lg font-semibold" }, "Authentication Required")
                        ),
                        React.createElement('p', { className: "text-gray-600 mb-4" }, "Please enter the admin password to continue:"),
                        React.createElement('input', {
                            type: "password",
                            value: passwordInput,
                            onChange: (e) => setPasswordInput(e.target.value),
                            onKeyPress: (e) => e.key === 'Enter' && handlePasswordSubmit(),
                            className: "w-full px-3 py-2 border border-gray-300 rounded-md mb-4 focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                            placeholder: "Enter password",
                            autoFocus: true
                        }),
                        React.createElement('div', { className: "flex justify-end space-x-2" },
                            React.createElement('button', {
                                onClick: () => {
                                    setShowPasswordModal(false);
                                    setPasswordInput('');
                                },
                                className: "px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors"
                            }, "Cancel"),
                            React.createElement('button', {
                                onClick: handlePasswordSubmit,
                                className: "px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"
                            }, "Submit")
                        )
                    )
                )
            );

            // Admin Form Component
            const AdminForm = ({ entity, setEntity, isNew = false }) => (
                React.createElement('div', { className: "space-y-6" },
                    React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-4" },
                        React.createElement('div', null,
                            React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-1" }, "Name"),
                            React.createElement('input', {
                                type: "text",
                                value: entity.name,
                                onChange: (e) => setEntity(prev => ({ ...prev, name: e.target.value })),
                                className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            })
                        ),
                        React.createElement('div', null,
                            React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-1" }, "Type"),
                            React.createElement('select', {
                                value: entity.type,
                                onChange: (e) => setEntity(prev => ({ ...prev, type: e.target.value })),
                                className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            },
                                React.createElement('option', { value: "facility" }, "Medical Facility"),
                                React.createElement('option', { value: "911center" }, "911 Center")
                            )
                        )
                    ),
                    React.createElement('div', null,
                        React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-1" }, "Address"),
                        React.createElement('textarea', {
                            value: entity.address,
                            onChange: (e) => setEntity(prev => ({ ...prev, address: e.target.value })),
                            className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                            rows: "2"
                        })
                    ),
                    React.createElement('div', null,
                        React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "Phone Numbers"),
                        ...entity.phoneNumbers.map((phone, index) =>
                            React.createElement('div', { key: index, className: "flex items-center space-x-2 mb-2" },
                                React.createElement('input', {
                                    type: "text",
                                    placeholder: "Department",
                                    value: phone.department,
                                    onChange: (e) => handlePhoneChange(index, 'department', e.target.value, entity, setEntity),
                                    className: "flex-1 px-3 py-2 border border-gray-300 rounded-md"
                                }),
                                React.createElement('input', {
                                    type: "text",
                                    placeholder: "Phone Number",
                                    value: phone.number,
                                    onChange: (e) => handlePhoneChange(index, 'number', e.target.value, entity, setEntity),
                                    className: "flex-1 px-3 py-2 border border-gray-300 rounded-md"
                                }),
                                React.createElement('select', {
                                    value: phone.type,
                                    onChange: (e) => handlePhoneChange(index, 'type', e.target.value, entity, setEntity),
                                    className: "px-3 py-2 border border-gray-300 rounded-md"
                                },
                                    React.createElement('option', { value: "primary" }, "Primary"),
                                    React.createElement('option', { value: "emergency" }, "Emergency"),
                                    React.createElement('option', { value: "department" }, "Department"),
                                    React.createElement('option', { value: "admin" }, "Admin")
                                ),
                                React.createElement('button', {
                                    onClick: () => handleRemovePhone(index, entity, setEntity),
                                    className: "p-2 text-red-600 hover:bg-red-50 rounded-md",
                                    disabled: entity.phoneNumbers.length === 1
                                }, React.createElement(Trash2, { className: "h-4 w-4" }))
                            )
                        ),
                        React.createElement('button', {
                            onClick: () => handleAddPhone(entity, setEntity),
                            className: "flex items-center space-x-1 text-blue-600 hover:text-blue-800 text-sm"
                        },
                            React.createElement(Plus, { className: "h-4 w-4" }),
                            React.createElement('span', null, "Add Phone Number")
                        )
                    ),
                    React.createElement('div', null,
                        React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-1" }, "Contracted Service"),
                        React.createElement('input', {
                            type: "text",
                            value: entity.contractedService,
                            onChange: (e) => setEntity(prev => ({ ...prev, contractedService: e.target.value })),
                            className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        })
                    ),
                    entity.type === 'facility' && React.createElement('div', null,
                        React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-1" }, "ER Entrance Information"),
                        React.createElement('textarea', {
                            value: entity.erEntrance,
                            onChange: (e) => setEntity(prev => ({ ...prev, erEntrance: e.target.value })),
                            className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                            rows: "3",
                            placeholder: "Describe ER entrance location and access details..."
                        })
                    ),
                    React.createElement('div', { className: "border border-gray-200 rounded-md p-4" },
                        React.createElement('h4', { className: "font-medium text-gray-900 mb-3" }, "Flight Program"),
                        React.createElement('div', { className: "space-y-3" },
                            React.createElement('div', { className: "flex items-center space-x-4" },
                                React.createElement('label', { className: "flex items-center" },
                                    React.createElement('input', {
                                        type: "checkbox",
                                        checked: entity.flightProgram.isOneCall,
                                        onChange: (e) => setEntity(prev => ({
                                            ...prev,
                                            flightProgram: { ...prev.flightProgram, isOneCall: e.target.checked }
                                        })),
                                        className: "mr-2"
                                    }),
                                    "One Call Facility/Center"
                                ),
                                React.createElement('label', { className: "flex items-center" },
                                    React.createElement('input', {
                                        type: "checkbox",
                                        checked: entity.flightProgram.participating,
                                        onChange: (e) => setEntity(prev => ({
                                            ...prev,
                                            flightProgram: { ...prev.flightProgram, participating: e.target.checked }
                                        })),
                                        className: "mr-2"
                                    }),
                                    "Flight Program Participant"
                                )
                            ),
                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-1" }, "Flight Program Notes"),
                                React.createElement('textarea', {
                                    value: entity.flightProgram.notes,
                                    onChange: (e) => setEntity(prev => ({
                                        ...prev,
                                        flightProgram: { ...prev.flightProgram, notes: e.target.value }
                                    })),
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-md",
                                    rows: "2"
                                })
                            )
                        )
                    ),
                    React.createElement('div', { className: "border border-gray-200 rounded-md p-4" },
                        React.createElement('h4', { className: "font-medium text-gray-900 mb-3" }, "Backup Services"),
                        React.createElement('div', { className: "space-y-3" },
                            entity.type === 'facility' ? [
                                React.createElement('div', { key: "air" },
                                    React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-1" }, "Air Service Backup"),
                                    React.createElement('input', {
                                        type: "text",
                                        value: entity.backupServices.airService,
                                        onChange: (e) => setEntity(prev => ({
                                            ...prev,
                                            backupServices: { ...prev.backupServices, airService: e.target.value }
                                        })),
                                        className: "w-full px-3 py-2 border border-gray-300 rounded-md",
                                        placeholder: "Backup air service contact and distance"
                                    })
                                ),
                                React.createElement('div', { key: "ground" },
                                    React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-1" }, "Ground Service Backup"),
                                    React.createElement('input', {
                                        type: "text",
                                        value: entity.backupServices.groundService,
                                        onChange: (e) => setEntity(prev => ({
                                            ...prev,
                                            backupServices: { ...prev.backupServices, groundService: e.target.value }
                                        })),
                                        className: "w-full px-3 py-2 border border-gray-300 rounded-md",
                                        placeholder: "Backup ground service contact and distance"
                                    })
                                )
                            ] : [
                                React.createElement('div', { key: "nounits" },
                                    React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-1" }, "No Units Available Contact"),
                                    React.createElement('input', {
                                        type: "text",
                                        value: entity.backupServices.noUnitsContact,
                                        onChange: (e) => setEntity(prev => ({
                                            ...prev,
                                            backupServices: { ...prev.backupServices, noUnitsContact: e.target.value }
                                        })),
                                        className: "w-full px-3 py-2 border border-gray-300 rounded-md",
                                        placeholder: "Contact when no units available"
                                    })
                                ),
                                React.createElement('div', { key: "mutual" },
                                    React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-1" }, "Mutual Aid Contact"),
                                    React.createElement('input', {
                                        type: "text",
                                        value: entity.backupServices.mutualAid,
                                        onChange: (e) => setEntity(prev => ({
                                            ...prev,
                                            backupServices: { ...prev.backupServices, mutualAid: e.target.value }
                                        })),
                                        className: "w-full px-3 py-2 border border-gray-300 rounded-md",
                                        placeholder: "Mutual aid coordination contact"
                                    })
                                )
                            ]
                        )
                    ),
                    entity.type === '911center' && React.createElement('div', { className: "border border-gray-200 rounded-md p-4" },
                        React.createElement('h4', { className: "font-medium text-gray-900 mb-3" }, "Coverage Information"),
                        React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-3 gap-3" },
                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-1" }, "Coverage Area"),
                                React.createElement('input', {
                                    type: "text",
                                    value: entity.countyInfo.coverage,
                                    onChange: (e) => setEntity(prev => ({
                                        ...prev,
                                        countyInfo: { ...prev.countyInfo, coverage: e.target.value }
                                    })),
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-md"
                                })
                            ),
                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-1" }, "Population"),
                                React.createElement('input', {
                                    type: "text",
                                    value: entity.countyInfo.population,
                                    onChange: (e) => setEntity(prev => ({
                                        ...prev,
                                        countyInfo: { ...prev.countyInfo, population: e.target.value }
                                    })),
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-md"
                                })
                            ),
                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-1" }, "Square Miles"),
                                React.createElement('input', {
                                    type: "text",
                                    value: entity.countyInfo.squareMiles,
                                    onChange: (e) => setEntity(prev => ({
                                        ...prev,
                                        countyInfo: { ...prev.countyInfo, squareMiles: e.target.value }
                                    })),
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-md"
                                })
                            )
                        )
                    ),
                    React.createElement('div', null,
                        React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-1" }, "Notes"),
                        React.createElement('textarea', {
                            value: entity.notes,
                            onChange: (e) => setEntity(prev => ({ ...prev, notes: e.target.value })),
                            className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                            rows: "3",
                            placeholder: "Operational notes and important information..."
                        })
                    )
                )
            );

            return React.createElement('div', { className: "min-h-screen bg-gray-50" },
                showPasswordModal && React.createElement(PasswordModal),

                // Admin Modal
                showAdmin && isAuthenticated && React.createElement('div', { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" },
                    React.createElement('div', { className: "bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto" },
                        React.createElement('div', { className: "p-6 border-b" },
                            React.createElement('div', { className: "flex justify-between items-center" },
                                React.createElement('h3', { className: "text-xl font-semibold" }, "Add New Entity"),
                                React.createElement('button', {
                                    onClick: () => setShowAdmin(false),
                                    className: "p-2 hover:bg-gray-100 rounded-md"
                                }, React.createElement(X, { className: "h-5 w-5" }))
                            )
                        ),
                        React.createElement('div', { className: "p-6" },
                            React.createElement(AdminForm, { entity: newEntity, setEntity: setNewEntity, isNew: true }),
                            React.createElement('div', { className: "flex justify-end space-x-2 mt-6" },
                                React.createElement('button', {
                                    onClick: () => setShowAdmin(false),
                                    className: "px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors"
                                }, "Cancel"),
                                React.createElement('button', {
                                    onClick: handleSaveNewEntity,
                                    className: "px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"
                                }, "Save Entity")
                            )
                        )
                    )
                ),

                React.createElement('div', { className: "bg-white shadow-sm border-b" },
                    React.createElement('div', { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8" },
                        React.createElement('div', { className: "flex justify-between items-center py-4" },
                            React.createElement('h1', { className: "text-2xl font-bold text-gray-900" }, "Emergency Services Portal"),
                            React.createElement('div', { className: "flex items-center space-x-4" },
                                React.createElement('button', {
                                    onClick: () => handleAdminClick('add'),
                                    className: "flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors"
                                },
                                    React.createElement(Plus, { className: "h-4 w-4" }),
                                    React.createElement('span', null, "Add Entity")
                                ),
                                isAdminAuthenticated && React.createElement('button', {
                                    onClick: exportData,
                                    className: "flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"
                                }, "Export Data"),
                                isAdminAuthenticated && React.createElement('label', { className: "flex items-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors cursor-pointer" },
                                    React.createElement('span', null, "Import Data"),
                                    React.createElement('input', {
                                        type: "file",
                                        accept: ".json",
                                        onChange: importData,
                                        className: "hidden"
                                    })
                                ),
                                React.createElement('button', {
                                    onClick: () => setIsPortalAuthenticated(false),
                                    className: "flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors"
                                }, "Logout"),
                                React.createElement('div', { className: "text-sm text-gray-500" }, "Communications Center")
                            )
                        )
                    )
                ),

                React.createElement('div', { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6" },
                    React.createElement('div', { className: "grid grid-cols-1 lg:grid-cols-3 gap-6" },
                        // Entity Search & List
                        React.createElement('div', { className: "lg:col-span-1" },
                            React.createElement('div', { className: "bg-white rounded-lg shadow" },
                                React.createElement('div', { className: "p-4 border-b" },
                                    React.createElement('div', { className: "relative" },
                                        React.createElement(Search, { className: "absolute left-3 top-3 h-4 w-4 text-gray-400" }),
                                        React.createElement('input', {
                                            type: "text",
                                            placeholder: "Search entities...",
                                            className: "w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                                            value: searchTerm,
                                            onChange: (e) => setSearchTerm(e.target.value)
                                        })
                                    )
                                ),
                                React.createElement('div', { className: "max-h-96 overflow-y-auto" },
                                    ...filteredEntities.map((entity) =>
                                        React.createElement('div', {
                                            key: entity.id,
                                            className: `p-4 border-b cursor-pointer hover:bg-gray-50 transition-colors ${
                                                selectedEntity?.id === entity.id ? 'bg-blue-50 border-l-4 border-l-blue-500' : ''
                                            }`,
                                            onClick: () => setSelectedEntity(entity)
                                        },
                                            React.createElement('div', { className: "flex justify-between items-start" },
                                                React.createElement('div', { className: "flex-1" },
                                                    React.createElement('div', { className: "flex items-center space-x-2 mb-1" },
                                                        getTypeIcon(entity.type),
                                                        React.createElement('h3', { className: "font-medium text-gray-900" }, entity.name)
                                                    ),
                                                    React.createElement('p', { className: "text-sm text-gray-600" }, entity.phoneNumbers[0]?.number),
                                                    React.createElement('p', { className: "text-xs text-gray-500 truncate" }, entity.address)
                                                ),
                                                React.createElement('span', { className: `px-2 py-1 rounded-full text-xs font-medium ${getTypeColor(entity.type)}` },
                                                    entity.type === 'facility' ? 'Facility' : '911 Center'
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        ),

                        // Entity Details
                        React.createElement('div', { className: "lg:col-span-2" },
                            selectedEntity ? React.createElement('div', { className: "space-y-6" },
                                // Header
                                React.createElement('div', { className: "bg-white rounded-lg shadow p-6" },
                                    React.createElement('div', { className: "flex justify-between items-start mb-4" },
                                        React.createElement('div', null,
                                            React.createElement('div', { className: "flex items-center space-x-2 mb-2" },
                                                getTypeIcon(selectedEntity.type),
                                                React.createElement('h2', { className: "text-2xl font-bold text-gray-900" }, selectedEntity.name)
                                            ),
                                            React.createElement('span', { className: `px-3 py-1 rounded-full text-sm font-medium ${getTypeColor(selectedEntity.type)}` },
                                                selectedEntity.type === 'facility' ? 'Medical Facility' : '911 Dispatch Center'
                                            )
                                        ),
                                        isAuthenticated && React.createElement('div', { className: "flex items-center space-x-2" },
                                            React.createElement('button', {
                                                onClick: () => handleDeleteEntity(selectedEntity.id),
                                                className: "flex items-center space-x-1 px-3 py-1 rounded-md text-sm font-medium bg-red-100 text-red-700 hover:bg-red-200 transition-colors"
                                            },
                                                React.createElement(Trash2, { className: "h-4 w-4" }),
                                                React.createElement('span', null, "Delete")
                                            )
                                        )
                                    ),
                                    React.createElement('div', { className: "space-y-3" },
                                        React.createElement('div', { className: "flex items-start space-x-2" },
                                            React.createElement(MapPin, { className: "h-4 w-4 text-gray-400 mt-1" }),
                                            React.createElement('span', { className: "text-gray-700" }, selectedEntity.address)
                                        ),
                                        React.createElement('div', { className: "flex items-center space-x-2" },
                                            React.createElement(Calendar, { className: "h-4 w-4 text-gray-400" }),
                                            React.createElement('span', { className: "text-gray-600" }, `Last Contact: ${selectedEntity.lastContact}`)
                                        )
                                    )
                                ),

                                // Phone Numbers
                                React.createElement('div', { className: "bg-white rounded-lg shadow p-6" },
                                    React.createElement('h3', { className: "text-lg font-semibold text-gray-900 mb-4 flex items-center" },
                                        React.createElement(Phone, { className: "h-5 w-5 mr-2" }),
                                        "Department Phone Numbers"
                                    ),
                                    React.createElement('div', { className: "space-y-3" },
                                        ...selectedEntity.phoneNumbers.map((phone, index) =>
                                            React.createElement('div', { key: index, className: "flex items-center justify-between p-3 border border-gray-200 rounded-md" },
                                                React.createElement('div', { className: "flex items-center space-x-4 flex-1" },
                                                    React.createElement('span', { className: "font-medium text-gray-900 min-w-24" }, `${phone.department}:`),
                                                    React.createElement('span', { className: "font-mono text-blue-600 text-lg" }, phone.number)
                                                ),
                                                React.createElement('span', { className: `px-2 py-1 rounded-full text-xs font-medium ${getPhoneTypeColor(phone.type)}` }, phone.type)
                                            )
                                        )
                                    )
                                ),

                                // Service Contract
                                React.createElement('div', { className: "bg-white rounded-lg shadow p-6" },
                                    React.createElement('h3', { className: "text-lg font-semibold text-gray-900 mb-4" }, "Contracted Service"),
                                    React.createElement('p', { className: "text-gray-700 font-medium" }, selectedEntity.contractedService)
                                ),

                                // ER Entrance Info (Facilities Only)
                                selectedEntity.type === 'facility' && React.createElement('div', { className: "bg-white rounded-lg shadow p-6" },
                                    React.createElement('h3', { className: "text-lg font-semibold text-gray-900 mb-4 flex items-center" },
                                        React.createElement(Truck, { className: "h-5 w-5 mr-2" }),
                                        "ER Entrance Information"
                                    ),
                                    React.createElement('p', { className: "text-gray-700 bg-blue-50 p-4 rounded-md" }, selectedEntity.erEntrance)
                                ),

                                // Flight Program Info
                                React.createElement('div', { className: "bg-white rounded-lg shadow p-6" },
                                    React.createElement('h3', { className: "text-lg font-semibold text-gray-900 mb-4 flex items-center" },
                                        React.createElement(Plane, { className: "h-5 w-5 mr-2" }),
                                        "Flight Program Status"
                                    ),
                                    React.createElement('div', { className: "space-y-3" },
                                        React.createElement('div', { className: "flex items-center justify-between" },
                                            React.createElement('span', { className: "text-gray-600" }, "One Call Facility/Center:"),
                                            React.createElement('span', { className: `px-3 py-1 rounded-full text-sm font-medium ${
                                                selectedEntity.flightProgram.isOneCall 
                                                    ? 'bg-green-100 text-green-800' 
                                                    : 'bg-red-100 text-red-800'
                                            }` }, selectedEntity.flightProgram.isOneCall ? 'Yes' : 'No')
                                        ),
                                        React.createElement('div', { className: "flex items-center justify-between" },
                                            React.createElement('span', { className: "text-gray-600" }, "Flight Program Participant:"),
                                            React.createElement('span', { className: `px-3 py-1 rounded-full text-sm font-medium ${
                                                selectedEntity.flightProgram.participating 
                                                    ? 'bg-green-100 text-green-800' 
                                                    : 'bg-red-100 text-red-800'
                                            }` }, selectedEntity.flightProgram.participating ? 'Active' : 'Not Participating')
                                        ),
                                        React.createElement('p', { className: "text-gray-700 text-sm bg-gray-50 p-3 rounded-md" }, selectedEntity.flightProgram.notes)
                                    )
                                ),

                                // Backup Services
                                React.createElement('div', { className: "bg-white rounded-lg shadow p-6" },
                                    React.createElement('h3', { className: "text-lg font-semibold text-gray-900 mb-4 flex items-center" },
                                        React.createElement(AlertTriangle, { className: "h-5 w-5 mr-2 text-orange-500" }),
                                        "Backup Services"
                                    ),
                                    selectedEntity.type === 'facility' ? React.createElement('div', { className: "space-y-4" },
                                        React.createElement('div', null,
                                            React.createElement('h4', { className: "font-medium text-gray-900 mb-2 flex items-center" },
                                                React.createElement(Plane, { className: "h-4 w-4 mr-1" }),
                                                "Air Service Backup"
                                            ),
                                            React.createElement('p', { className: "text-gray-700 bg-orange-50 p-3 rounded-md font-medium" }, selectedEntity.backupServices.airService)
                                        ),
                                        React.createElement('div', null,
                                            React.createElement('h4', { className: "font-medium text-gray-900 mb-2 flex items-center" },
                                                React.createElement(Truck, { className: "h-4 w-4 mr-1" }),
                                                "Ground Service Backup"
                                            ),
                                            React.createElement('p', { className: "text-gray-700 bg-blue-50 p-3 rounded-md font-medium" }, selectedEntity.backupServices.groundService)
                                        )
                                    ) : React.createElement('div', { className: "space-y-4" },
                                        React.createElement('div', null,
                                            React.createElement('h4', { className: "font-medium text-gray-900 mb-2" }, "No Available Units Contact"),
                                            React.createElement('p', { className: "text-gray-700 bg-red-50 p-3 rounded-md font-medium" }, selectedEntity.backupServices.noUnitsContact)
                                        ),
                                        React.createElement('div', null,
                                            React.createElement('h4', { className: "font-medium text-gray-900 mb-2" }, "Mutual Aid Contact"),
                                            React.createElement('p', { className: "text-gray-700 bg-yellow-50 p-3 rounded-md font-medium" }, selectedEntity.backupServices.mutualAid)
                                        ),
                                        selectedEntity.countyInfo && React.createElement('div', null,
                                            React.createElement('h4', { className: "font-medium text-gray-900 mb-2" }, "Coverage Area"),
                                            React.createElement('div', { className: "bg-gray-50 p-3 rounded-md space-y-1" },
                                                React.createElement('p', { className: "text-sm" },
                                                    React.createElement('span', { className: "font-medium" }, "Area: "),
                                                    selectedEntity.countyInfo.coverage
                                                ),
                                                React.createElement('p', { className: "text-sm" },
                                                    React.createElement('span', { className: "font-medium" }, "Population: "),
                                                    selectedEntity.countyInfo.population
                                                ),
                                                React.createElement('p', { className: "text-sm" },
                                                    React.createElement('span', { className: "font-medium" }, "Square Miles: "),
                                                    selectedEntity.countyInfo.squareMiles
                                                )
                                            )
                                        )
                                    )
                                ),

                                // Notes
                                React.createElement('div', { className: "bg-white rounded-lg shadow p-6" },
                                    React.createElement('h3', { className: "text-lg font-semibold text-gray-900 mb-4" }, "Operational Notes"),
                                    React.createElement('p', { className: "text-gray-700 bg-gray-50 p-4 rounded-md" }, selectedEntity.notes)
                                )
                            ) : React.createElement('div', { className: "bg-white rounded-lg shadow p-8 text-center" },
                                React.createElement(Building, { className: "h-16 w-16 text-gray-300 mx-auto mb-4" }),
                                React.createElement('h3', { className: "text-lg font-medium text-gray-900 mb-2" }, "Select a Facility or 911 Center"),
                                React.createElement('p', { className: "text-gray-600" }, "Search and select from the list to view complete emergency services information.")
                            )
                        )
                    )
                )
            );
        };

        ReactDOM.render(React.createElement(EmergencyPortal), document.getElementById('root'));
    </script>
</body>
</html>
